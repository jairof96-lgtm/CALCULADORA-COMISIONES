<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Gesti贸n Jairo - Proyecci贸n</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: sans-serif; background-color: #f1f5f9; }
        .card { background: white; border-radius: 1.5rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); border: 1px solid #e2e8f0; }
        .meta-box { background: #f8fafc; border: 1px dashed #cbd5e1; border-radius: 1rem; }
    </style>
</head>
<body class="p-4 pb-20">
    <div class="max-w-md mx-auto space-y-4">
        
        <div class="bg-slate-900 p-6 rounded-[2rem] text-white shadow-xl text-center">
            <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">Comisi贸n Estimada</p>
            <h1 id="comision-eficiencia" class="text-4xl font-black text-emerald-400">L 0.00</h1>
            <div id="status" class="mt-2 text-[9px] font-bold bg-indigo-500/20 text-indigo-300 py-1 px-3 rounded-full inline-block uppercase tracking-tighter">Calculador de Metas Activo</div>
        </div>

        <div class="card p-5 space-y-3">
            <label class="block text-[10px] font-black text-slate-500 uppercase">Recaudaci贸n Semana Actual (L)</label>
            <input type="number" id="recaudacion" oninput="calcularEficiencia()" placeholder="L 0.00" class="w-full bg-slate-50 border-2 border-slate-100 rounded-xl p-3 text-lg font-bold">
            
            <label class="block text-[10px] font-black text-slate-500 uppercase">Tu Factor</label>
            <div class="grid grid-cols-3 gap-2">
                <button onclick="setFactor('A')" id="btnA" class="p-3 rounded-xl font-black border-2 border-slate-200 bg-slate-50 text-slate-400">A</button>
                <button onclick="setFactor('B')" id="btnB" class="p-3 rounded-xl font-black border-2 border-slate-200 bg-slate-50 text-slate-400">B</button>
                <button onclick="setFactor('C')" id="btnC" class="p-3 rounded-xl font-black border-2 border-slate-200 bg-slate-50 text-slate-400">C</button>
            </div>
        </div>

        <div id="proyeccion-card" class="card p-5 bg-indigo-50/50 border-indigo-100">
            <p class="text-[10px] font-black text-indigo-600 uppercase mb-3 flex items-center gap-1">
                <span></span> 驴Cu谩nto necesito en la Semana 4?
            </p>
            <div class="grid grid-cols-2 gap-2 text-[11px]">
                <div class="meta-box p-3">
                    <p class="text-slate-500 font-bold uppercase text-[8px]">Para Tasa 1</p>
                    <p id="meta-t1" class="text-slate-800 font-black text-sm">--</p>
                </div>
                <div class="meta-box p-3">
                    <p class="text-slate-500 font-bold uppercase text-[8px]">Para Tasa M谩xima</p>
                    <p id="meta-max" class="text-indigo-600 font-black text-sm">--</p>
                </div>
            </div>
            <p class="text-[9px] text-slate-400 mt-3 italic text-center">* Basado en el promedio de las primeras 3 semanas.</p>
        </div>

        <div class="card p-5">
            <div class="flex items-center justify-between mb-4">
                <label class="text-[10px] font-black text-slate-500 uppercase tracking-wider">Eficiencias (%)</label>
                <span id="promedio-display" class="bg-indigo-600 text-white px-2 py-1 rounded-lg text-xs font-black shadow-sm">PROM: 0%</span>
            </div>
            <div class="grid grid-cols-2 gap-3">
                <input type="number" id="s1" oninput="calcularEficiencia()" placeholder="Sem 1 %" class="bg-slate-50 border-2 border-slate-100 rounded-xl p-3 font-bold text-center">
                <input type="number" id="s2" oninput="calcularEficiencia()" placeholder="Sem 2 %" class="bg-slate-50 border-2 border-slate-100 rounded-xl p-3 font-bold text-center">
                <input type="number" id="s3" oninput="calcularEficiencia()" placeholder="Sem 3 %" class="bg-slate-50 border-2 border-slate-100 rounded-xl p-3 font-bold text-center">
                <input type="number" id="s4" oninput="calcularEficiencia()" placeholder="Sem 4 %" class="bg-white border-2 border-indigo-500 rounded-xl p-3 font-bold text-center text-indigo-600">
            </div>
        </div>

    </div>

    <script>
        let factor = 'A';

        window.onload = function() {
            const campos = ['recaudacion', 's1', 's2', 's3', 's4'];
            campos.forEach(c => {
                if(localStorage.getItem(c
